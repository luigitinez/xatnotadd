<!DOCTYPE html>
<html>
<head>
	<title>XnA</title>
	<!-- Hojas de estilo-->
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
	<link href="select2/select2.min.css" rel="stylesheet" />
	<link rel="stylesheet" type="text/css" href="./sweetalert/sweetalert2.css">
	<link rel="shortcut icon" href="./media/fav.png" />
	<link rel="stylesheet" type="text/css" href="./css/style.css">
	
	<!-- meta-->
	<meta charset="utf-8">
	<meta name="google-site-verification" content="pocTIPouEACXEeQAOqsrKQ4EW_7rg951YejnOzw2zm0" />

	<!-- scripts-->
	<script src="js/bootstrap.js"></script>
	<script src="./js/jquery.min.js"></script>
	<script src="./select2/select2.min.js"></script>
	<script src="./sweetalert/sweetalert2.min.js"></script>
	
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-md-6">
				<img src="./media/XnA-big.png" class="img-responsive" alt="Cinque Terre">

			</div>
			<div class="col-md-6">
				<h1 class="eslogan"> No need to add, just chat</h1>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-6 form-group">
				<label>Country of the phone to chat:</label>
				<select class="js-example-basic-single form-control" name="pais" id="pais" data-placeholder="Select a state">
				  <option value="34">Spain</option>
				  <option value="93">Afganistan</option>
				  <option value="378">Andorra</option>
				  <option value="378">Andorra</option>
				  <option value="90">Turkey</option>
				</select>
			</div>
			<div class="col-lg-6 form-group">
				<label>Phone number to chat with:</label>
				<input type="text" id="num" name="num" class="form-control">
			</div>
		</div>
		<div class="row">
			<div class="col-sm-6">
				<button class="btn btn-success" onclick="chck(0)">Genenarte Conversation</button>
				<button class="btn btn-info" onclick="chck(1)">Genenarte Link</button>
			</div>		
		</div>
	</div>
	<script type="text/javascript">
		$(document).ready(function() {
    $('.js-example-basic-single').select2();
});
//esta verifica que se haya introducido un número y si es así llama a otra función en función de su parámetro
		function chck(what){

			var pais = $("#pais").val();
			var num = $("#num").val();
			
			if (!isNumeric(num)) {
		
				swal("Error", "Phone field isn't a phone number", "error");
				return;
				
			} 

			var url = "https://api.whatsapp.com/send?phone="+pais+num;
			if (what) {
				link(url);
			}else{
				send(url);
			}
			
		}
		//redirecciona a la api de whastapp
		function send(url){
			location.replace(url);
		}
		function link(url){
			var num = $("#num").val();
			$("#num").val(url);
			clipboardfn();
			$("#num").val(num);
			swal("The link was copied to your clipboard",url,"info");
		}
			
		function isNumeric(n){
			return!isNaN(parseFloat(n))&& isFinite(n);
		}
		
		function clipboardfn() {
  			var copyText = document.getElementById("num");
 			copyText.select();
  			document.execCommand("copy");
  			return true;
		}

	</script>
</body>
</html>